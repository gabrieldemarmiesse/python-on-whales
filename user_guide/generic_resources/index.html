
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Python on whales docs">
      
      
      
      
        <link rel="prev" href="../docker_run/">
      
      
        <link rel="next" href="../running_python_on_whales_inside_a_container/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.34">
    
    
      
        <title>Swarm generic resources - Python on whales</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.35f28582.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#docker-swarm-generic-resources" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Python on whales" class="md-header__button md-logo" aria-label="Python on whales" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Python on whales
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Swarm generic resources
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/gabrieldemarmiesse/python-on-whales" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Python on whales" class="md-nav__button md-logo" aria-label="Python on whales" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Python on whales
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/gabrieldemarmiesse/python-on-whales" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker_client/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker client
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Sub-commands
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Sub-commands
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sub-commands/buildx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker buildx
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sub-commands/compose/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker compose
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sub-commands/config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker config
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sub-commands/container/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker container
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sub-commands/context/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker context
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sub-commands/image/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker image
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sub-commands/manifest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker manifest
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sub-commands/network/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker network
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sub-commands/node/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker node
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sub-commands/plugin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker plugin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sub-commands/secret/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker secret
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sub-commands/service/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker service
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sub-commands/stack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker stack
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sub-commands/swarm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker swarm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sub-commands/system/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker system
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sub-commands/task/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker task
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sub-commands/trust/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker trust
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sub-commands/volume/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker volume
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sub-commands/pod/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    podman pod
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Objects
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Objects
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../objects/builders/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Builders
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../objects/configs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../objects/containers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Containers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../objects/images/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Images
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../objects/networks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Networks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../objects/nodes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Nodes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../objects/plugins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plugins
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../objects/pods/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pods
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../objects/secrets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Secrets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../objects/services/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Services
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../objects/stacks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Stacks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../objects/tasks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tasks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../objects/volumes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Volumes
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            User guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker_run/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker.run() guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Swarm generic resources
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Swarm generic resources
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#named-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Named resources
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Named resources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-services-with-the-cli" class="md-nav__link">
    <span class="md-ellipsis">
      Creating services with the CLI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-hamsters-with-docker-stack" class="md-nav__link">
    <span class="md-ellipsis">
      Using hamsters with Docker stack
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-does-that-fit-with-nvidia-gpus" class="md-nav__link">
    <span class="md-ellipsis">
      How does that fit with Nvidia GPUs?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#discreet-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Discreet resources
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../running_python_on_whales_inside_a_container/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running python-on-whales inside a container
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../exceptions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dealing with exceptions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#named-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Named resources
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Named resources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-services-with-the-cli" class="md-nav__link">
    <span class="md-ellipsis">
      Creating services with the CLI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-hamsters-with-docker-stack" class="md-nav__link">
    <span class="md-ellipsis">
      Using hamsters with Docker stack
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-does-that-fit-with-nvidia-gpus" class="md-nav__link">
    <span class="md-ellipsis">
      How does that fit with Nvidia GPUs?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#discreet-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Discreet resources
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="docker-swarm-generic-resources">Docker Swarm generic resources</h1>
<p>There are two kind of generic resources, discreet and named.</p>
<p>Both are declared in <code>/etc/docker/daemon.json</code> and both are 
accessible in your containers as environment variables.</p>
<h2 id="named-resources">Named resources</h2>
<p>Named resources should be used when you have a small number of things you want accessed.
The best example is gpu devices. Each gpu has a UUID, which can be the 
name of this resources. Actually you could also use an index, and this index would have 
to be the "name" of the gpu.</p>
<p>Since we want to show they're generic, let's take something else than GPUs for this example.</p>
<p>Let's say you have 5 hamsters connected to your node, making an app run:</p>
<p><img src="https://i.imgur.com/6bjNsYU.gif" alt="logo" class="responsive" style="width: 45%; height: auto;">
<img src="https://i.imgur.com/6bjNsYU.gif" alt="logo" class="responsive" style="width: 45%; height: auto;">
<img src="https://i.imgur.com/6bjNsYU.gif" alt="logo" class="responsive" style="width: 30%; height: auto;">
<img src="https://i.imgur.com/6bjNsYU.gif" alt="logo" class="responsive" style="width: 30%; height: auto;">
<img src="https://i.imgur.com/6bjNsYU.gif" alt="logo" class="responsive" style="width: 30%; height: auto;"></p>
<p>They are named Robert, Lucie, Annie, James and Stacy.</p>
<p>You'll define one service that needs one hamster and one that needs three.
We'll call them <code>my_light_service</code> and <code>my_heavy_service</code>.</p>
<p>Let's declare the hamsters in the <code>/etc/docker/daemon.json</code>. If this file doesn't exist
on your system, you can create it.</p>
<p>Mine looks like this, note that you don't need the insecure registries part:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;insecure-registries&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;127.0.0.1:5000&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;node-generic-resources&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;hamster=Robert&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;hamster=Lucie&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;hamster=Annie&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;hamster=James&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;hamster=Stacy&quot;</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div></p>
<p>Restart your Docker daemon with <code>sudo service docker restart</code>.</p>
<p>Then create a Docker swarm: <code>docker swarm init</code></p>
<p>The hamster are declared, up and ready to go! 
You can check they're here with <code>docker node ls</code> and <code>docker node inspect</code>.</p>
<h3 id="creating-services-with-the-cli">Creating services with the CLI</h3>
<p>It's time to create services and hit those hamsters!</p>
<p>First we'll create the services with the CLI and then with the command line.
<div class="highlight"><pre><span></span><code>$ docker service create --generic-resource &quot;hamster=1&quot; --name my_light_service ubuntu bash -c &quot;env &amp;&amp; sleep infinity&quot;
$ docker service create --generic-resource &quot;hamster=3&quot; --name my_heavy_service ubuntu bash -c &quot;env &amp;&amp; sleep infinity&quot;
</code></pre></div></p>
<p>We have one replica for the light and heavy service. They use 4 hamster. Let's try to use moooooooore!</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>docker<span class="w"> </span>service<span class="w"> </span>scale<span class="w"> </span>-d<span class="w"> </span><span class="nv">my_light_service</span><span class="o">=</span><span class="m">10</span><span class="w"> </span><span class="nv">my_heavy_service</span><span class="o">=</span><span class="m">10</span>
$<span class="w"> </span>docker<span class="w"> </span>service<span class="w"> </span>ls
ID<span class="w">                  </span>NAME<span class="w">                </span>MODE<span class="w">                </span>REPLICAS<span class="w">            </span>IMAGE<span class="w">               </span>PORTS
tt436bxjtdn7<span class="w">        </span>my_heavy_service<span class="w">    </span>replicated<span class="w">          </span><span class="m">1</span>/10<span class="w">                 </span>ubuntu:latest
ksiq5x0bxch1<span class="w">        </span>my_light_service<span class="w">    </span>replicated<span class="w">          </span><span class="m">2</span>/10<span class="w">                 </span>ubuntu:latest
</code></pre></div>
<p>Remember, we only have 5 hamsters, and 3 are needed for the heavy service and one for the light service.
Hence here 2 * 1 + 1 * 3 = 5 ! This is what we wanted. So how does each container knows which hamster to use?</p>
<p>We asked each container to print the environment variables and sleep for infinity <code>env &amp;&amp; sleep infinity</code>.
Let's take a look with <code>docker logs</code>:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>docker<span class="w"> </span>ps
CONTAINER<span class="w"> </span>ID<span class="w"> </span>IMAGE<span class="w">          </span>COMMAND<span class="w">                </span>NAMES
1e8932f5a985<span class="w"> </span>ubuntu:latest<span class="w">  </span><span class="s2">&quot;bash -c &#39;env &amp;&amp; sle…&quot;</span><span class="w"> </span>my_light_service.4.shys2wwxz7jjfjg2g2e0xl1sw
0a5c4ddd303a<span class="w"> </span>ubuntu:latest<span class="w">  </span><span class="s2">&quot;bash -c &#39;env &amp;&amp; sle…&quot;</span><span class="w"> </span>my_heavy_service.1.p39satddgf6j1uhspdiohcyzh
e2872006cc97<span class="w"> </span>ubuntu:latest<span class="w">  </span><span class="s2">&quot;bash -c &#39;env &amp;&amp; sle…&quot;</span><span class="w"> </span>my_light_service.1.bbo0fbi5d5e2zdwozgbse8x57

$<span class="w"> </span>docker<span class="w"> </span>logs<span class="w"> </span>my_light_service.4.shys2wwxz7jjfjg2g2e0xl1sw
<span class="nv">DOCKER_RESOURCE_HAMSTER</span><span class="o">=</span>Stacy
<span class="nv">HOSTNAME</span><span class="o">=</span>1e8932f5a985

$<span class="w"> </span>docker<span class="w"> </span>logs<span class="w"> </span>my_heavy_service.1.p39satddgf6j1uhspdiohcyzh
<span class="nv">DOCKER_RESOURCE_HAMSTER</span><span class="o">=</span>Lucie,Annie,James
<span class="nv">HOSTNAME</span><span class="o">=</span>0a5c4ddd303a

$<span class="w"> </span>docker<span class="w"> </span>logs<span class="w"> </span>my_light_service.1.bbo0fbi5d5e2zdwozgbse8x57
<span class="nv">DOCKER_RESOURCE_HAMSTER</span><span class="o">=</span>Robert
<span class="nv">HOSTNAME</span><span class="o">=</span>e2872006cc97
</code></pre></div>
<p>So we can see that each container is aware of it's hamster with an environment variable.
The process running in the container can grab it and then use the correct hamster without 
making two containers use the same hamster.</p>
<h3 id="using-hamsters-with-docker-stack">Using hamsters with Docker stack</h3>
<p>Here is a <code>docker-compose.yml</code> that will declare the services exactly like we did in the CLI:</p>
<div class="highlight"><pre><span></span><code><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3.8&quot;</span>

<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">my_light_service</span><span class="p">:</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bash</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-c</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">env &amp;&amp; sleep infinity</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu</span>
<span class="w">    </span><span class="nt">deploy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">      </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">        </span><span class="nt">reservations</span><span class="p">:</span>
<span class="w">          </span><span class="nt">generic_resources</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">discrete_resource_spec</span><span class="p">:</span>
<span class="w">                </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;hamster&#39;</span>
<span class="w">                </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>

<span class="w">  </span><span class="nt">my_heavy_service</span><span class="p">:</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bash</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-c</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">env &amp;&amp; sleep infinity</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu</span>
<span class="w">    </span><span class="nt">deploy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">      </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">        </span><span class="nt">reservations</span><span class="p">:</span>
<span class="w">          </span><span class="nt">generic_resources</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">discrete_resource_spec</span><span class="p">:</span>
<span class="w">                </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;hamster&#39;</span>
<span class="w">                </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>docker<span class="w"> </span>stack<span class="w"> </span>deploy<span class="w"> </span>-c<span class="w"> </span>docker-compose.yml<span class="w"> </span>my_stack_using_hamsters
Creating<span class="w"> </span>network<span class="w"> </span>my_stack_using_hamsters_default
Creating<span class="w"> </span>service<span class="w"> </span>my_stack_using_hamsters_my_heavy_service
Creating<span class="w"> </span>service<span class="w"> </span>my_stack_using_hamsters_my_light_service

$<span class="w"> </span>docker<span class="w"> </span>service<span class="w"> </span>ls
ID<span class="w">              </span>NAME<span class="w">                                       </span>MODE<span class="w">        </span>REPLICAS<span class="w">  </span>IMAGE<span class="w"> </span>
nlhwfnz0d1cx<span class="w">    </span>my_stack_using_hamsters_my_heavy_service<span class="w">   </span>replicated<span class="w">  </span><span class="m">1</span>/10<span class="w">      </span>ubuntu:latest
c77tv3czzfw2<span class="w">    </span>my_stack_using_hamsters_my_light_service<span class="w">   </span>replicated<span class="w">  </span><span class="m">2</span>/10<span class="w">      </span>ubuntu:latest
</code></pre></div>
<h3 id="how-does-that-fit-with-nvidia-gpus">How does that fit with Nvidia GPUs?</h3>
<p>Well, if you remember, the Nvidia runtime uses environment variables in the container to know which gpu to use.</p>
<p>By modifying the <code>/etc/nvidia-container-runtime/config.toml</code>, 
and setting <code>swarm-resource = "DOCKER_RESOURCE_GPU"</code>, it indicates the nvidia-docker runtime 
that it should watch for this environment variable when deciding which gpu to use.
Make the nvidia-docker runtime the default one for this node, replace hamster by gpu and you're good to
go as long as you used UUID as your hamster's names.</p>
<p>A more in depth guide can be found <a href="https://gist.github.com/tomlankhorst/33da3c4b9edbde5c83fc1244f010815c">here</a>.</p>
<h2 id="discreet-resources">Discreet resources</h2>
<p>TODO (just put <code>"node-generic-resources": ["hamster=100"]</code> in the daemon.json, there are too many hamsters to give them names).</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.07f07601.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.56dfad97.min.js"></script>
      
    
  </body>
</html>